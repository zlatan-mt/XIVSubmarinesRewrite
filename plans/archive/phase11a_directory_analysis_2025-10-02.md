# Phase11-A: ディレクトリ棚卸しと移行先決定

## 📊 現在のディレクトリ分析結果

### ディレクトリ別ファイル数
```
.git : 1183 files
.github : 2 files
.serena : 6 files
bin : 10 files
docs : 4 files
logs : 46 files
node_modules : 469 files
obj : 32 files
plans : 13 files
Properties : 1 files
sessions : 13 files
src : 119 files
tests : 498 files
tools : 57 files
vendor : 1588 files
```

## 🎯 ディレクトリ分類と移行先決定

### ✅ 公開ブランチ（release）に残すもの

| ディレクトリ | ファイル数 | 用途 | 理由 |
|-------------|-----------|------|------|
| **src/** | 119 | ソースコード | プラグインの本体 |
| **tests/** | 498 | テストコード | 品質保証のため |
| **tools/** | 57 | 開発ツール | DalamudRestore, RendererPreview |
| **vendor/** | 1588 | 依存関係 | ビルドに必要 |
| **.github/** | 2 | CI/CD | 自動化のため |
| **Properties/** | 1 | プロジェクト設定 | ビルドに必要 |

### 🔄 developブランチに移行するもの

| ディレクトリ | ファイル数 | 用途 | 移行理由 |
|-------------|-----------|------|----------|
| **docs/** | 4 | 開発ドキュメント | 利用者には不要 |
| **plans/** | 13 | 開発計画 | 開発者向け資料 |
| **sessions/** | 13 | セッション記録 | 開発履歴 |
| **logs/** | 46 | ログファイル | デバッグ用 |
| **.serena/** | 6 | 開発環境設定 | 開発者固有 |

### 🚫 gitignore対象

| ディレクトリ | ファイル数 | 用途 | 理由 |
|-------------|-----------|------|------|
| **bin/** | 10 | ビルド成果物 | 自動生成される |
| **obj/** | 32 | ビルド中間ファイル | 自動生成される |
| **node_modules/** | 469 | Node.js依存関係 | 自動生成される |

## 🔄 ブランチ戦略

### release ブランチ（公開用）
- **目的**: 利用者向けのクリーンなリポジトリ
- **内容**: ソースコード、テスト、必要最小限のツールのみ
- **更新**: develop ブランチから定期的にマージ
- **ファイル数**: 約 2,300 ファイル（現在の 4,000+ から大幅削減）

### develop ブランチ（開発用）
- **目的**: 開発作業とドキュメント管理
- **内容**: 全ディレクトリを含む完全な開発環境
- **更新**: 継続的な開発作業
- **ファイル数**: 約 4,000+ ファイル（現在と同様）

## 📋 次のフェーズでの作業

### Phase11-B: ブランチ分離
1. develop ブランチを作成（現在のmasterをベース）
2. release ブランチを作成（クリーンな状態）
3. 不要ディレクトリを release ブランチから削除

### Phase11-C: .gitattributes 設定
1. export-ignore で不要ディレクトリを除外
2. Release ZIP 生成ロジックを更新
3. クリーンな配布物を確保

### Phase11-D: 最終調整
1. README/CONTRIBUTING を更新
2. ブランチ運用ルールを明記
3. 移行後の手順をドキュメント化

## 🎯 期待される効果

### 利用者向けの改善
- **リポジトリサイズ**: 約 40% 削減
- **表示ファイル数**: 約 50% 削減
- **ダウンロード速度**: 大幅改善
- **可読性**: 必要なファイルのみ表示

### 開発者向けの改善
- **開発履歴**: develop ブランチで完全保持
- **ドキュメント**: 整理された状態で管理
- **ブランチ運用**: 明確な役割分担

## ⚠️ リスク対策

### データ損失防止
- develop ブランチで全履歴を保持
- 移行前のバックアップ作成
- 段階的な移行で検証

### 運用継続性
- 明確なブランチ運用ルール
- マージ手順の標準化
- 緊急時の復旧手順

---

**Phase11-A 完了**: ディレクトリ分析と移行先決定が完了しました。
